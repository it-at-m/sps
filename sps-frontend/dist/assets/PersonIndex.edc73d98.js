import{d as u,u as f,r,o as v,c as P,n as c,e as g,f as y,g as E,h as x,_ as I,i as L,j as b,k as h,l as $}from"./index.5c2e6855.js";import{P as S}from"./PersonListItem.0a998b19.js";import{P as C}from"./PersonApiService.e3829719.js";import{_ as N}from"./VListItemAction.f187d94c.js";import{_ as R}from"./VSubheader.3dd6c797.js";import{_ as k}from"./VTooltip.3363e3a0.js";import"./DeleteDialog.bb2477fd.js";import"./VDialog.54b8c02e.js";import"./EntityApiService.bdec22c4.js";const A=u({__name:"PersonList",setup(a){const n=f(),e=r([]),t=r(!1),s=r(-1),_=r(Number.MAX_VALUE),l=r(null);v(()=>{i()});function i(){t.value=!0,C.getAllPaged(s.value+1,20,"personListItem").then(o=>{e.value.push(...o.data),s.value=o.page,_.value=o.totalPages,l.value=o.totalElements}).catch(o=>{n.showMessage(o)}).finally(()=>{t.value=!1})}function p(o){e.value=e.value.filter(m=>m.id!=o.id)}const d=P(()=>s.value>=_.value-1);return{__sfc:!0,snackbarStore:n,people:e,busy:t,currentPage:s,totalPages:_,totalElements:l,loadMore:i,itemDeleted:p,allPagesLoaded:d,PersonListItem:S}}});var M=function(){var n=this,e=n._self._c,t=n._self._setupProxy;return e(g,{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{id:"infinite-scroll","two-line":"","infinite-scroll-disabled":"busy"}},[n._l(t.people,function(s,_){return[e(t.PersonListItem,{key:`person-${s.id}`,attrs:{person:s},on:{deleted:t.itemDeleted}}),e(N,{key:`divider-${_}`,staticClass:"divider"})]}),t.allPagesLoaded?e(y,[e(E,{staticClass:"text--secondary d-flex justify-center"},[n._v(" "+n._s(t.totalElements)+" Eintr\xE4ge insgesamt ")])],1):n._e(),!t.busy&&(t.people===void 0||t.people.length<1)?[e(R,[n._v("Keine Personen vorhanden")])]:n._e(),t.busy?[e(x,{attrs:{indeterminate:"",color:"accent"}})]:n._e()],2)},K=[],T=c(A,M,K,!1,null,"a74d6bcc",null,null);const w=T.exports,B=u({__name:"PersonIndex",setup(a){return{__sfc:!0,PersonList:w}}});var D=function(){var n=this,e=n._self._c,t=n._self._setupProxy;return e(I,[e(L,{attrs:{flat:""}},[e(b,[n._v("Personen")]),e(t.PersonList)],1),e(k,{attrs:{top:""},scopedSlots:n._u([{key:"activator",fn:function({on:s}){return[e(h,n._g({directives:[{name:"security",rawName:"v-security",value:"BEISPIELPROJEKT_BACKEND_WRITE_PERSON",expression:"`BEISPIELPROJEKT_BACKEND_WRITE_PERSON`"}],attrs:{id:"create-person",bottom:"",right:"",fixed:"",fab:"",dark:"",color:"accent",to:{path:"/people/create"}}},s),[e($,[n._v("mdi-plus")])],1)]}}])},[e("span",[n._v("Neue Person anlegen")])])],1)},O=[],V=c(B,D,O,!1,null,"ffd41737",null,null);const H=V.exports;export{H as default};
