System.register(["./index-legacy.61f8d398.js","./PersonForm-legacy.70f1d946.js","./PersonApiService-legacy.a6da53e9.js","./rules-legacy.5f414f13.js","./VListItemAction-legacy.95905544.js","./VSubheader-legacy.02f008b3.js","./TeamApiService-legacy.6d98872a.js","./EntityApiService-legacy.b2f891be.js","./VRow-legacy.f60ab543.js"],(function(e,a){"use strict";var t,s,n,i,l,r,o,m,u,c,v,d,f;return{setters:[e=>{t=e.d,s=e.U,n=e.x,i=e.u,l=e.r,r=e.o,o=e.L,m=e.n,u=e._,c=e.i,v=e.h},e=>{d=e.P},e=>{f=e.P},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){e("default",m(t({__name:"PersonEdit",setup(e){const a=s(),t=n(),m=i(),u=l({firstname:"",lastname:"",email:"",teamId:""}),c=l(!0),v=l(!1),g=l("");function p(){f.get(g.value,["team"]).then((e=>{var a,t;u.value={firstname:e.firstname,lastname:e.lastname,email:e.email,teamId:null!==(a=null===(t=e.team)||void 0===t?void 0:t.id)&&void 0!==a?a:""},c.value=!1})).catch((e=>{m.showMessage(e),t.push({name:"person.detail",params:{id:g.value}})}))}return r((()=>{g.value=a.params.id,p()})),{__sfc:!0,route:a,router:t,snackbarStore:m,personData:u,isLoading:c,isSavingAnimation:v,personId:g,loadPerson:p,save:function(){v.value=!0,f.update({id:g.value,firstname:u.value.firstname,lastname:u.value.lastname,fullname:u.value.firstname+" "+u.value.lastname,email:u.value.email}).then((e=>{f.createRelation(e,"team","teams",u.value.teamId?u.value.teamId:"").then((()=>{e&&t.push({name:"person.detail",params:{id:e.id?e.id.toString():""}})})).catch((e=>m.showMessage({level:o.ERROR,message:e}))).finally((()=>v.value=!1))})).catch((e=>{m.showMessage({level:o.ERROR,message:e}),v.value=!1}))},PersonForm:d}}}),(function(){var e=this,a=e._self._c,t=e._self._setupProxy;return a(u,[a(c,{attrs:{flat:""}},[t.isLoading?a(v,{attrs:{indeterminate:""}}):[a("h1",{staticClass:"text-h5",staticStyle:{"margin-bottom":"1em"}},[e._v(" Person bearbeiten ")]),a(t.PersonForm,{attrs:{"is-saving-animation":t.isSavingAnimation},on:{save:t.save},model:{value:t.personData,callback:function(e){t.personData=e},expression:"personData"}})]],2)],1)}),[],!1,null,"2ca41b82",null,null).exports)}}}));
