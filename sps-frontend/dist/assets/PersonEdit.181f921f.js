import{d,U as g,x as h,u as R,r as l,o as b,L as p,n as P,_ as S,i as x,h as y}from"./index.5c2e6855.js";import{P as E}from"./PersonForm.df49b320.js";import{P as m}from"./PersonApiService.e3829719.js";import"./rules.61a0ee6c.js";import"./VListItemAction.f187d94c.js";import"./VSubheader.3dd6c797.js";import"./TeamApiService.45f87cc8.js";import"./EntityApiService.bdec22c4.js";import"./VRow.6a903a37.js";const I=d({__name:"PersonEdit",setup(v){const n=g(),s=h(),a=R(),t=l({firstname:"",lastname:"",email:"",teamId:""}),u=l(!0),i=l(!1),o=l("");b(()=>{o.value=n.params.id,_()});function _(){m.get(o.value,["team"]).then(e=>{var r,c;t.value={firstname:e.firstname,lastname:e.lastname,email:e.email,teamId:(c=(r=e.team)==null?void 0:r.id)!=null?c:""},u.value=!1}).catch(e=>{a.showMessage(e),s.push({name:"person.detail",params:{id:o.value}})})}function f(){i.value=!0,m.update({id:o.value,firstname:t.value.firstname,lastname:t.value.lastname,fullname:t.value.firstname+" "+t.value.lastname,email:t.value.email}).then(e=>{m.createRelation(e,"team","teams",t.value.teamId?t.value.teamId:"").then(()=>{!e||s.push({name:"person.detail",params:{id:e.id?e.id.toString():""}})}).catch(r=>a.showMessage({level:p.ERROR,message:r})).finally(()=>i.value=!1)}).catch(e=>{a.showMessage({level:p.ERROR,message:e}),i.value=!1})}return{__sfc:!0,route:n,router:s,snackbarStore:a,personData:t,isLoading:u,isSavingAnimation:i,personId:o,loadPerson:_,save:f,PersonForm:E}}});var D=function(){var n=this,s=n._self._c,a=n._self._setupProxy;return s(S,[s(x,{attrs:{flat:""}},[a.isLoading?s(y,{attrs:{indeterminate:""}}):[s("h1",{staticClass:"text-h5",staticStyle:{"margin-bottom":"1em"}},[n._v(" Person bearbeiten ")]),s(a.PersonForm,{attrs:{"is-saving-animation":a.isSavingAnimation},on:{save:a.save},model:{value:a.personData,callback:function(t){a.personData=t},expression:"personData"}})]],2)],1)},L=[],M=P(I,D,L,!1,null,"2ca41b82",null,null);const j=M.exports;export{j as default};
